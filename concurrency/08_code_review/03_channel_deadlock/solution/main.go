package main

// –°–ü–ò–°–û–ö –ù–ê–ô–î–ï–ù–ù–´–• –ü–†–û–ë–õ–ï–ú –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:
//
// 1. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –±–µ–∑ —É—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏ 32-37)
//    –ü—Ä–æ–±–ª–µ–º–∞: for { select { case q := <-m: ... } }
//              –¶–∏–∫–ª –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∞–µ—Ç
//    –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª–æ–≤–∏–µ –≤—ã—Ö–æ–¥–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å range –ø–æ –∫–∞–Ω–∞–ª—É
//
// 2. –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ wc.Wait() (—Å—Ç—Ä–æ–∫–∞ 39)
//    –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑-–∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ wc.Wait() –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
//    –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Wait() –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É
//
// 3. –ù–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥ close(m) (—Å—Ç—Ä–æ–∫–∞ 40)
//    –ü—Ä–æ–±–ª–µ–º–∞: close(m) –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑-–∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
//    –†–µ—à–µ–Ω–∏–µ: –ó–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
//
// 4. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—å—é—Ç–µ–∫—Å–∞ (—Å—Ç—Ä–æ–∫–∏ 26-28)
//    –ü—Ä–æ–±–ª–µ–º–∞: fff.Lock() –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ –∫–∞–Ω–∞–ª –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–µ–Ω –∏ –æ–ø–∞—Å–µ–Ω
//              - –ó–∞—â–∏—â–∞—Ç—å –∫–∞–Ω–∞–ª –º—å—é—Ç–µ–∫—Å–æ–º –Ω–µ—Ç —Å–º—ã—Å–ª–∞ (–∫–∞–Ω–∞–ª—ã –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã)
//              - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –æ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏
//              - –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ deadlock –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –∑–∞–ø–æ–ª–Ω–µ–Ω
//    –†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–∏—Ç—å –º—å—é—Ç–µ–∫—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é - –∫–∞–Ω–∞–ª—ã thread-safe –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
//
// 5. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π deadlock –∏–∑-–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ –±—É—Ñ–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 19)
//    –ü—Ä–æ–±–ª–µ–º–∞: –ë—É—Ñ–µ—Ä –∫–∞–Ω–∞–ª–∞ = 3, –Ω–æ –≥–æ—Ä—É—Ç–∏–Ω = 5
//              –° –º—å—é—Ç–µ–∫—Å–æ–º: –ø–µ—Ä–≤—ã–µ 3 –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–ø–æ–ª–Ω—è—Ç –±—É—Ñ–µ—Ä, 4-—è –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
//              –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–µ, –¥–µ—Ä–∂–∞ Lock. –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ —Å–º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å Lock.
//              –ì–ª–∞–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ —á–∏—Ç–∞–µ—Ç (–≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ), deadlock!
//    –†–µ—à–µ–Ω–∏–µ: –õ–∏–±–æ —É–≤–µ–ª–∏—á–∏—Ç—å –±—É—Ñ–µ—Ä –¥–æ 5, –ª–∏–±–æ —É–±—Ä–∞—Ç—å –º—å—é—Ç–µ–∫—Å –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞—Ç—å
//
// 6. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä group (—Å—Ç—Ä–æ–∫–∞ 24)
//    –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä–∞–º–µ—Ç—Ä group *sync.WaitGroup –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
//              –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–º—ã–∫–∞–Ω–∏–µ wc, –∞ –Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä group
//    –†–µ—à–µ–Ω–∏–µ: –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä, –ª–∏–±–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ
//
// 7. –û–ø–µ—á–∞—Ç–∫–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 27)
//    –ü—Ä–æ–±–ª–µ–º–∞: "Gorutine" –≤–º–µ—Å—Ç–æ "Goroutine"
//    –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ
//
// 8. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 27)
//    –ü—Ä–æ–±–ª–µ–º–∞: fmt.Sprintf("Gorutine %s", strconv.Itoa(i))
//              –î–≤–æ–π–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: int -> string -> format
//    –†–µ—à–µ–Ω–∏–µ: fmt.Sprintf("Goroutine %d", i) - –ø—Ä—è–º–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
//
// 9. –ü–ª–æ—Ö–∏–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏ 18, 19, 20)
//    –ü—Ä–æ–±–ª–µ–º–∞: wc –≤–º–µ—Å—Ç–æ wg, fff –≤–º–µ—Å—Ç–æ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏, m –≤–º–µ—Å—Ç–æ messages
//    –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞
//
// 10. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è
//     –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —á–∏—Ç–∞—Ç—å –∏–∑ –∫–∞–Ω–∞–ª–∞
//     –†–µ—à–µ–Ω–∏–µ: –ó–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å range
//

import (
	"fmt"
	"sync"
)

// –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ—Å—Ç–æ–µ - –∏—Å–ø–æ–ª—å–∑—É–µ–º range –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª
func solution1() {
	fmt.Println("=== –†–µ—à–µ–Ω–∏–µ 1: Range –ø–æ –∫–∞–Ω–∞–ª—É ===")

	var wg sync.WaitGroup
	// –ë—É—Ñ–µ—Ä = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω
	messages := make(chan string, 5)

	// –ó–∞–ø—É—Å–∫–∞–µ–º –≥–æ—Ä—É—Ç–∏–Ω—ã
	for i := 0; i < 5; i++ {
		wg.Add(1)
		go func(ch chan<- string, id int) {
			defer wg.Done()
			// –ö–∞–Ω–∞–ª thread-safe, –º—å—é—Ç–µ–∫—Å –Ω–µ –Ω—É–∂–µ–Ω!
			ch <- fmt.Sprintf("Goroutine %d", id)
		}(messages, i)
	}

	// –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π
	go func() {
		wg.Wait()
		close(messages)
	}()

	// Range –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –∫–æ–≥–¥–∞ –∫–∞–Ω–∞–ª –∑–∞–∫—Ä–æ–µ—Ç—Å—è
	for msg := range messages {
		fmt.Println(msg)
	}

	fmt.Println("–í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
}

// –†–ï–®–ï–ù–ò–ï 2: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
func solution2() {
	fmt.Println("\n=== –†–µ—à–µ–Ω–∏–µ 2: –°—á–µ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π ===")

	const numGoroutines = 5
	var wg sync.WaitGroup
	messages := make(chan string, numGoroutines)

	// –ó–∞–ø—É—Å–∫–∞–µ–º –≥–æ—Ä—É—Ç–∏–Ω—ã
	for i := 0; i < numGoroutines; i++ {
		wg.Add(1)
		go func(ch chan<- string, id int) {
			defer wg.Done()
			ch <- fmt.Sprintf("Goroutine %d", id)
		}(messages, i)
	}

	// –ß–∏—Ç–∞–µ–º —Ä–æ–≤–Ω–æ numGoroutines —Å–æ–æ–±—â–µ–Ω–∏–π
	for i := 0; i < numGoroutines; i++ {
		msg := <-messages
		fmt.Println(msg)
	}

	// –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–æ—Ä—É—Ç–∏–Ω
	wg.Wait()
	close(messages)

	fmt.Println("–í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
}

// –†–ï–®–ï–ù–ò–ï 3: –ò—Å–ø–æ–ª—å–∑—É–µ–º select —Å —Ç–∞–π–º–∞—É—Ç–æ–º (–¥–ª—è production)
func solution3() {
	fmt.Println("\n=== –†–µ—à–µ–Ω–∏–µ 3: Select —Å done –∫–∞–Ω–∞–ª–æ–º ===")

	var wg sync.WaitGroup
	messages := make(chan string, 5)
	done := make(chan struct{})

	// –ó–∞–ø—É—Å–∫–∞–µ–º –≥–æ—Ä—É—Ç–∏–Ω—ã
	for i := 0; i < 5; i++ {
		wg.Add(1)
		go func(ch chan<- string, id int) {
			defer wg.Done()
			ch <- fmt.Sprintf("Goroutine %d", id)
		}(messages, i)
	}

	// –°–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
	go func() {
		wg.Wait()
		close(done)
	}()

	// –ß–∏—Ç–∞–µ–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π done
	for {
		select {
		case msg, ok := <-messages:
			if !ok {
				// –ö–∞–Ω–∞–ª –∑–∞–∫—Ä—ã—Ç, –Ω–æ –Ω–µ –≤ —ç—Ç–æ–º —Ä–µ—à–µ–Ω–∏–∏
				return
			}
			fmt.Println(msg)
		case <-done:
			// –í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã, —á–∏—Ç–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
			for len(messages) > 0 {
				fmt.Println(<-messages)
			}
			close(messages)
			fmt.Println("–í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã")
			return
		}
	}
}

func main() {
	solution1()
	solution2()
	solution3()
}

// –û–ë–™–Ø–°–ù–ï–ù–ò–ï –ü–û–ß–ï–ú–£ –û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –ö–û–î –ó–ê–í–ò–°–ê–ï–¢:
//
// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π:
//
// 1. –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–∞–ª —Å –±—É—Ñ–µ—Ä–æ–º 3: m := make(chan string, 3)
// 2. –°–æ–∑–¥–∞–µ–º –º—å—é—Ç–µ–∫—Å: fff := sync.Mutex{}
// 3. –ó–∞–ø—É—Å–∫–∞–µ–º 5 –≥–æ—Ä—É—Ç–∏–Ω:
//
//    –ì–æ—Ä—É—Ç–∏–Ω–∞ 0:
//      - fff.Lock() ‚úÖ (–ø–æ–ª—É—á–∏–ª–∞ lock)
//      - mm <- "Goroutine 0" ‚úÖ (–±—É—Ñ–µ—Ä: 1/3)
//      - fff.Unlock() ‚úÖ
//      - defer wc.Done() ‚úÖ
//
//    –ì–æ—Ä—É—Ç–∏–Ω–∞ 1:
//      - fff.Lock() ‚úÖ
//      - mm <- "Goroutine 1" ‚úÖ (–±—É—Ñ–µ—Ä: 2/3)
//      - fff.Unlock() ‚úÖ
//      - defer wc.Done() ‚úÖ
//
//    –ì–æ—Ä—É—Ç–∏–Ω–∞ 2:
//      - fff.Lock() ‚úÖ
//      - mm <- "Goroutine 2" ‚úÖ (–±—É—Ñ–µ—Ä: 3/3 –ü–û–õ–ù–´–ô!)
//      - fff.Unlock() ‚úÖ
//      - defer wc.Done() ‚úÖ
//
//    –ì–æ—Ä—É—Ç–∏–Ω–∞ 3:
//      - fff.Lock() ‚úÖ (–ø–æ–ª—É—á–∏–ª–∞ lock)
//      - mm <- "Goroutine 3" üîí –ë–õ–û–ö–ò–†–û–í–ö–ê!
//        –ë—É—Ñ–µ—Ä –ø–æ–ª–æ–Ω, –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
//        Lock –ù–ï –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è (Unlock –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º)
//
//    –ì–æ—Ä—É—Ç–∏–Ω–∞ 4:
//      - fff.Lock() üîí –ñ–î–ï–¢!
//        –ì–æ—Ä—É—Ç–∏–Ω–∞ 3 –¥–µ—Ä–∂–∏—Ç lock
//
// 4. –ì–ª–∞–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞:
//    for { select { case q := <-m: fmt.Println(q) } }
//    - –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ë–ï–ó —É—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞
//    - –ß–∏—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–µ 3 —Å–æ–æ–±—â–µ–Ω–∏—è
//    - –ù–û: select –±–µ–∑ default –±–ª–æ–∫–∏—Ä—É–µ—Ç, –∂–¥–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
//    - –ì–æ—Ä—É—Ç–∏–Ω–∞ 3 –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å (–∂–¥–µ—Ç –º–µ—Å—Ç–∞ –≤ –±—É—Ñ–µ—Ä–µ)
//    - –ì–ª–∞–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ —á–∏—Ç–∞–µ—Ç –¥–∞–ª—å—à–µ (–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª)
//    - DEADLOCK! –í—Å–µ –∑–∞—Å—Ç—Ä—è–ª–∏.
//
// 5. wc.Wait() –∏ close(m) –ù–ò–ö–û–ì–î–ê –ù–ï –í–´–ü–û–õ–ù–Ø–¢–°–Ø
//    - –ù–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ—Å–ª–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
//    - Unreachable code
//
// –ü–û–ß–ï–ú–£ –ú–¨–Æ–¢–ï–ö–° –ó–î–ï–°–¨ –í–†–ï–î–ï–ù:
//
// –ö–∞–Ω–∞–ª—ã –≤ Go –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã (thread-safe) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é!
// –ú—å—é—Ç–µ–∫—Å –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã –∫–∞–Ω–∞–ª–∞.
//
// –ú—å—é—Ç–µ–∫—Å –∑–¥–µ—Å—å:
// 1. –ë–µ—Å–ø–æ–ª–µ–∑–µ–Ω - –∫–∞–Ω–∞–ª—ã —É–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
// 2. –û–ø–∞—Å–µ–Ω - —Å–æ–∑–¥–∞–µ—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é
// 3. –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å deadlock –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º –±—É—Ñ–µ—Ä–µ
//
// –ü—Ä–∞–≤–∏–ª–æ: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—å—é—Ç–µ–∫—Å —Å –∫–∞–Ω–∞–ª–∞–º–∏!
//          –ö–∞–Ω–∞–ª—ã - —ç—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∞–º–∏ –ø–æ —Å–µ–±–µ.
//
// –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï:
//
// Solution 1 (–ª—É—á—à–µ–µ –¥–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏):
// 1. –ë—É—Ñ–µ—Ä = 5 (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
// 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–µ–∑ –º—å—é—Ç–µ–∫—Å–∞ (–∫–∞–Ω–∞–ª—ã thread-safe)
// 3. –§–æ–Ω–æ–≤–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥–µ—Ç wg.Wait() –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª
// 4. range –ø–æ –∫–∞–Ω–∞–ª—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø—Ä–∏ close()
// 5. –í—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
//
// Solution 2:
// 1. –ó–Ω–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π = 5
// 2. –ß–∏—Ç–∞–µ–º —Ä–æ–≤–Ω–æ 5 —Ä–∞–∑
// 3. –ó–∞—Ç–µ–º wg.Wait() –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
// 4. –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª
//
// Solution 3 (production-ready):
// 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º done –∫–∞–Ω–∞–ª –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
// 2. select –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–±–∞ —Å–ª—É—á–∞—è
// 3. –ü–æ—Å–ª–µ done —á–∏—Ç–∞–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è
// 4. Graceful –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
//
// –õ–£–ß–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò:
//
// 1. –ö–∞–Ω–∞–ª—ã –Ω–µ –Ω—É–∂–Ω–æ –∑–∞—â–∏—â–∞—Ç—å –º—å—é—Ç–µ–∫—Å–∞–º–∏
// 2. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª, –Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—å
// 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ range –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
// 4. WaitGroup –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
// 5. –ë—É—Ñ–µ—Ä >= –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
// 6. –û—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (wg –≤–º–µ—Å—Ç–æ wc)
// 7. –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
